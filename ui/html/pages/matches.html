{{define "title"}}Spiele{{end}}{{define "assets"}}{{end}}{{define "main"}}
<div class="container">
  <nav class="tabs">
    <h2>Spiele</h2>
    <ul>
      {{range .EventPhases}}
      <li {{if eq .Number $.SelectedPhase.Number}} class="active" {{end}}>
        <a href="/spiele?phase={{.Number}}">
          {{if eq .Number $.SelectedPhase.Number}}
          <strong>{{.Title}}</strong>
          {{else}} {{.Title}} {{end}}
        </a>
      </li>
      {{end}}
    </ul>
  </nav>

  {{if not .MatchTipps}}
  <p>Es sind noch keine Spiele zum Tippen verfügbar.</p>
  {{else}}
  <form action="/tipp/update" method="post">
    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}" />
    <div class="header-container">
      <input
        type="submit"
        value="Speichern"
        class="pure-button pure-button-primary header-container__right"
      />
    </div>

    <table class="cc-table cc-table-striped">
      <thead class="">
        <tr>
          <th class="w-1-12"></th>
          <th class="w-5-12">Spiel</th>
          <th class="w-2-12">Ergebnis</th>
          <th class="w-2-12">Dein Tipp</th>
          <th class="w-2-12">Punkte</th>
        </tr>
      </thead>
      <tbody>
        {{range .MatchTipps}}
        <tr>
          <td class="text-center">
            <a
              href="/spiel/{{.MatchId}}"
              class="status-label status-{{.Status}}"
              >status</a
            >
          </td>
          <td>
            {{if eq .TeamA ""}}
            <span class="team-none">(Noch offen)</span>
            {{else}}
            {{.TeamA}}
            {{end}}
            -
            {{if eq .TeamB ""}}
            <span class="team-none">(Noch offen)</span>
            {{else}}
            {{.TeamB}}
            {{end}}
            <br /><span
              class="muted">
              {{germanWeekday .Start}}, {{germanDate .Start}} {{.Start.Format "15:04" }}</span>
            </span>
          </td>
          <td>{{matchResult .ResultA .ResultB}}</td>
          <td>
            {{if .AcceptsTipps}}
            <input
              type="hidden"
              name="match_id_{{.MatchId}}"
              value="{{.MatchId}}"
            />
            <input
              type="number"
              min="0"
              max="99"
              name="tipp_a_{{.MatchId}}"
              value='{{defaultIntStr .TippA ""}}'
            />
            :
            <input
              type="number"
              min="0"
              max="99"
              name="tipp_b_{{.MatchId}}"
              value='{{defaultIntStr .TippB ""}}'
            />
            {{else}} 
              {{ if eq "-" (defaultIntStr .TippA "-") }}
              <small>Kein Tipp möglich</small>
              {{ else }}
              {{defaultIntStr .TippA "-"}}:{{defaultIntStr .TippB "-"}} 
              {{ end }}
            {{end}}
          </td>
          <td>{{if eq .Status "done"}} {{.Points}} {{end}}</td>
        </tr>
        {{end}}
      </tbody>
    </table>
    <div class="header-container">
      <input
        type="submit"
        value="Speichern"
        class="pure-button pure-button-primary header-container__right"
      />
    </div>
  </form>
</div>
{{end}} {{end}}
